<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily | Task | Tracker</title>
    <style>
      body {
        background-color: rgb(233, 233, 233);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }
      .container {
        background-color: white;
        margin: 50px;
        border-radius: 15px;
        box-sizing: border-box;
        padding-bottom: 20px;
      }
      .main-heading h1 {
        padding-top: 50px;
        margin-top: 40px;
        color: blue;
        font-weight: 500;
        text-transform: capitalize;
        text-align: center;
        font-family: sans-serif;
      }
      .tasks-details {
        display: flex;
        flex-direction: row;
        gap: 180px;
        justify-content: center;
        color: rgb(100, 100, 100);
        margin-top: 100px;
      }
      .completed-counts, .count-total, .pending-counts {
        color: blue;
      }

      .input-section {
        display: grid;
        grid-template-columns: 330px 200px 100px;
        margin-top: 30px;
        gap: 10px;
        margin-left: 25px;
        margin-left: 25px;
        justify-content: center;

      }
      input {
        line-height: 40px;
        border-radius: 25px;
        padding: 5px;
        padding-left: 15px;
        border: 1px solid gray;
        font-size: 15px;
      }
      input:hover{
        box-shadow: 2px 2px 4px rgb(170, 169, 169),
        -2px -2px 4px gray;
        border: none;

      }
      #priority-selection:hover{
        box-shadow: 2px 2px 4px rgb(170, 169, 169),
        -2px -2px 4px gray;
        border: none;
        
      }
      #priority-selection {
        border-radius: 25px;
        padding: 5px;
        padding-left: 15px;
        border: 1px solid gray;
        font-size: 15px;
      }
      button {
        border-radius: 20px;
        padding: 5px;
        border: 1px solid gray;
        font-size: 15px;
        background-color: blue;
        color: white;
        cursor: pointer;
        
      }
      button:hover{
        box-shadow: 2px 2px 4px blue;
        border: none;
      }

      .all-buttons {
        width: 90%;
        margin: 20px auto;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        cursor: pointer;
      }

      .all-buttons span {
        margin-left: 2px;
        text-align: center;
        border-radius: 15px;
        white-space: nowrap;
        display: inline-block;
        width: 120px;
        padding: 5px;
        box-shadow: 2px 2px 4px rgb(170, 169, 169);
      }

      .all-buttons span:hover {
        background-color: blue;
        color: white;
        box-shadow: 2px 2px 4px blue;
        border: none;
      }

      .check-box {
        display: flex;
        flex-direction: row;
        border-left: 5px solid gray;
        border-radius: 10px;
        margin-top: 30px;
        padding: 10px;
        width: 90%;
        border-bottom: 1px solid gray;
        border-right: 1px solid gray;
        border-top: 1px solid gray;
        margin-inline: auto;

      }
      .check-box p {
        width: 75%;
        margin-left: 50px;
      }
      .check-box span {
        display: flex;
        flex-direction: row;
        justify-content: right;
        cursor: pointer;
      }
      .right-of-check-box {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 10px;
        margin-left: auto;
        width: 100%;
      }
      #high {
        background-color: pink;
        color: red;
        padding: 5px;
        border-radius: 5px;
      }
      #delete {
        background-color: red;
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
      }
      .daily-task-check-box {
        display: flex;
        flex-direction: row;
        border-left: 5px solid rgb(206, 0, 0);
        border-radius: 10px;
        margin-top: 30px;
        padding: 10px;
        width: 90%;
        border-bottom: 1px solid gray;
        border-right: 1px solid gray;
        border-top: 1px solid gray;
        margin-inline: auto;
      }
      .daily-task-check-box p {
        width: 75%;
        margin-left: 50px;
      }
      .daily-task-check-box span {
        cursor: pointer;
      }

      .clear-completed-tasks {
        text-transform: uppercase;
        display: flex;
        justify-content: center;
        background-color: rgb(219, 26, 0);
        color: white;
        padding: 10px;
        width: 90%;
        margin: 40px auto;
        font-size: 18px;
        cursor: pointer;
      }
      .date-time {
        display: flex;
        justify-content: center;
        color: rgb(112, 112, 112);
      }
      .completed-task {
        filter: blur(0.5px);
      }

      .completed-task p {
        text-decoration: line-through;
        color: gray;
      }

      .priority-high {
        border-left: 5px solid red;
      }

      .priority-medium {
        border-left: 5px solid orange;
      }

      .priority-low {
        border-left: 5px solid gray;
      }

      .priority-label {
        background-color: lightgray;
        color: black;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 5px;
        text-transform: uppercase;
      }

      .priority-high .priority-label {
        background-color: red;
        color: white;
      }

      .priority-medium .priority-label {
        background-color: orange;
        color: white;
      }

      .priority-low .priority-label {
        background-color: gray;
        color: white;
      }

      @media (max-width: 800px) {
        .input-section {
          margin: 20px auto;
          grid-template-columns: 1fr;
          gap: 10px;
          justify-content: center;
        }

        input,
        #priority-selection,
        #add-button {
          width: 90%;
          margin: 0 auto;
        }

        .tasks-details {
          flex-direction: column;
          gap: 20px;
          align-items: center;
          margin-top: 40px;
        }

        .all-buttons {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
          gap: 10px;
          padding: 0 20px;
          width: 100%;
          margin-top: 20px;
        }

        .all-buttons span {
          width: 100%;
          text-align: center;
        }

        .check-box,
        .daily-task-check-box {
          flex-direction: column;
          align-items: flex-start;
          padding: 10px;
        }

        .check-box p,
        .daily-task-check-box p {
          margin-left: 10px;
          width: 100%;
        }

        .check-box input,
        .daily-task-check-box input {
          margin-left: 0;
        }

        .right-of-check-box {
          width: 100%;
          justify-content: space-between;
          flex-wrap: wrap;
          gap: 10px;
          margin-top: 10px;
        }

        .clear-completed-tasks {
          width: 90%;
          margin: 20px auto;
        }
      }

      @media (min-width: 801px) and (max-width: 1000px) {
        .all-buttons {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 10px;
          margin: 20px;
        }

        .check-box,
        .daily-task-check-box,
        .clear-completed-tasks {
          margin-left: auto;
          margin-right: auto;
          width: 90%;
        }
      }

      @media (min-width: 1001px) and (max-width: 1230px) {
        .all-buttons {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          grid-gap: 10px;
          margin: 20px auto;
          width: 90%;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="task-tracker-box">
        <header>
          <div class="main-heading">
            <h1>daily task tracker</h1>
          </div>
          <p class="date-time" id="date-display"></p>
        </header>
        <div class="tasks-details">
          <span id="total-tasks">
            <div class="count-total">
              <h2>0</h2>
            </div>

            <span>Total Tasks</span>
          </span>
          <span id="completed-tasks">
            <div class="completed-counts">
              <h2>0</h2>
            </div>
            <span>Completed</span>
          </span>
          <span id="pending-tasks">
            <div class="pending-counts"><h2>0</h2></div>
            <span>Pending</span>
          </span>
        </div>
        <div class="input-section">
          <input type="text" id="new-task" placeholder="Enter a new task..." />
          <select name="" id="priority-selection">
            <option value="">Low Priority</option>
            <option value="">Medium Priority</option>
            <option value="">High Priority</option>
          </select>
          <button id="add-button">Add Task</button>
        </div>
        <br /><br />
        <div class="all-buttons">
          <span id="all-task">All Tasks</span>
          <span id="pending">Pending</span>
          <span id="completed">Completed</span>
          <span id="high-priority">High Priority</span>
          <span id="medium-priority">Medium Priority</span>
          <span id="low-priority">Low Priority</span>
        </div>
        <br />
        <br />
        <div class="check-box">
          <input type="checkbox" id="complete-project" class="task-checkbox" />
          <p>Complete Project Presentation for client meeting</p>
          <div class="right-of-check-box">
            <span id="high"> HIGH </span>
            <span class="submission-time"> </span>
            <span id="delete">DELETE</span>
          </div>
        </div>
        <div class="daily-task-check-box">
          <input type="checkbox" id="complete-project" class="task-checkbox" />
          <p>Finish the 'Daily Task Tracker' project today</p>
          <div class="right-of-check-box">
            <span id="high"> HIGH </span>
            <span class="submission-time"> </span>
            <span id="delete">DELETE</span>
          </div>
        </div>
        <div class="clear-completed-tasks" onclick="clear_tasks()">
          clear completed tasks
        </div>
      </div>
    </div>
  </body>

  <script>
    // ============== 1. Show Todayâ€™s Date ================

    const dateElement = document.getElementById("date-display");

    const today = new Date();
    const weekdays = [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
    ];
    const formattedDate = `${weekdays[today.getDay()]}, ${today.getDate()}/${
      today.getMonth() + 1
    }/${today.getFullYear()}`;
    dateElement.textContent = formattedDate;

    // =================== 2.Get Current Time ===================
    function getCurrentTime() {
      const now = new Date();
      let hours = now.getHours();
      const minutes = String(now.getMinutes()).padStart(2, "0");
      const ampm = hours >= 12 ? "PM" : "AM";
      hours = hours % 12 || 12;
      return `${hours}:${minutes} ${ampm}`;
    }

    // =================== Checkbox Strike-through ===================
    function applyCheckboxLogic(checkbox, taskBox) {
      checkbox.addEventListener("change", () => {
        taskBox.classList.toggle("completed-task", checkbox.checked);
      });
    }

    // ===================Delete Button ===================
    function applyDeleteLogic(deleteBtn, taskBox) {
      deleteBtn.addEventListener("click", () => {
        taskBox.remove();
        updateTaskCount();
      });
    }

    // ===================Task Count ===================
    function updateTaskCount() {
      const allTasks = document.querySelectorAll(
        ".check-box, .daily-task-check-box"
      );
      let completed = 0;

      allTasks.forEach((task) => {
        const isChecked = task.querySelector("input[type='checkbox']").checked;
        if (isChecked) completed++;
      });

      const total = allTasks.length;
      const pending = total - completed;

      document.querySelector(".count-total h2").textContent = total;
      document.querySelector(".completed-counts h2").textContent = completed;
      document.querySelector(".pending-counts h2").textContent = pending;
    }

    // =================== Check Existing Tasks ===================
    const allTaskBoxes = document.querySelectorAll(
      ".check-box, .daily-task-check-box"
    );

    allTaskBoxes.forEach((taskBox) => {
      const checkbox = taskBox.querySelector("input[type='checkbox']");
      const deleteBtn = taskBox.querySelector("#delete");

      if (checkbox) applyCheckboxLogic(checkbox, taskBox);
      if (deleteBtn) applyDeleteLogic(deleteBtn, taskBox);
    });

    // =================== 7. Add New Task ===================
    document.getElementById("add-button").addEventListener("click", () => {
      const input = document.getElementById("new-task");
      const taskText = input.value.trim();
      if (!taskText) return;

      const newTask = document.createElement("div");
      newTask.className = "check-box";
      newTask.innerHTML = `
    <input type="checkbox" class="task-checkbox">
    <p>${taskText}</p>
    <div class="right-of-check-box">
      <span id="high">HIGH</span>
      <span class="submission-time">${getCurrentTime()}</span>
      <span id="delete">DELETE</span>
    </div>
  `;

      const clearBtn = document.querySelector(".clear-completed-tasks");
      clearBtn.parentNode.insertBefore(newTask, clearBtn);

      const checkbox = newTask.querySelector("input[type='checkbox']");
      const deleteBtn = newTask.querySelector("#delete");

      applyCheckboxLogic(checkbox, newTask);
      applyDeleteLogic(deleteBtn, newTask);

      input.value = "";
      updateTaskCount();
    });

    // =========clear All TAsks======

    function clear_tasks() {
      const taskBoxes = document.getElementsByClassName("check-box");

      for (let i = taskBoxes.length - 1; i >= 0; i--) {
        const checkbox = taskBoxes[i].querySelector('input[type="checkbox"]');
        if (checkbox && checkbox.checked) {
          taskBoxes[i].remove();
        }
      }
    }

    // ============= Priorities===========

    document.getElementById("add-button").addEventListener("click", () => {
      const input = document.getElementById("new-task");
      const taskText = input.value.trim();
      const priority = document.getElementById("priority-selection").value;

      if (!taskText) return;

      const newTask = document.createElement("div");
      newTask.className = "check-box";


      // Apply border color and label text=========
      let borderColor = "gray";
      let labelText = "LOW";

      if (priority === "high") {
        borderColor = "red";
        labelText = "HIGH";
      } else if (priority === "medium") {
        borderColor = "orange";
        labelText = "MEDIUM";
      }

      newTask.style.borderLeft = `5px solid ${borderColor}`;

      newTask.innerHTML = `
    <input type="checkbox" class="task-checkbox">
    <p>${taskText}</p>
    <div class="right-of-check-box">
      <span style="background-color:${borderColor}; color:white; padding:5px; border-radius:5px;">${labelText}</span>
      <span class="submission-time">${getCurrentTime()}</span>
      <span id="delete">DELETE</span>
    </div>
  `;

      const clearBtn = document.querySelector(".clear-completed-tasks");
      clearBtn.parentNode.insertBefore(newTask, clearBtn);

      const checkbox = newTask.querySelector("input[type='checkbox']");
      const deleteBtn = newTask.querySelector("#delete");

      applyCheckboxLogic(checkbox, newTask);
      applyDeleteLogic(deleteBtn, newTask);

      input.value = "";
      updateTaskCount();
    });

    // ===========Responsiveness of all-buttons===========

    document.querySelectorAll(".all-buttons span").forEach((button) => {
      button.addEventListener("click", () => {
        const filterType = button.id;

        const allTasks = document.querySelectorAll(
          ".check-box, .daily-task-check-box"
        );

        allTasks.forEach((task) => {
          task.style.display = "flex";

          const isChecked = task.querySelector(
            "input[type='checkbox']"
          ).checked;
          const isHigh = task.classList.contains("priority-high");
          const isMedium = task.classList.contains("priority-medium");
          const isLow = task.classList.contains("priority-low");

          // Filtering Conditions
          if (filterType === "completed" && !isChecked)
            task.style.display = "none";
          else if (filterType === "pending" && isChecked)
            task.style.display = "none";
          else if (filterType === "high-priority" && !isHigh)
            task.style.display = "none";
          else if (filterType === "medium-priority" && !isMedium)
            task.style.display = "none";
          else if (filterType === "low-priority" && !isLow)
            task.style.display = "none";
          else if (filterType === "all-task") task.style.display = "flex";
        });
      });
    });
  </script>
</html>
